<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>ダビふぁく</title>
    <link rel="manifest" href="./manifest.json" />
    <link href="./css/loading.css" type="text/css" rel="stylesheet" />
    <link href="./css/style.css" type="text/css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css"
      rel="stylesheet"
    />
    <link
      href="./css/vuetify_compact.min.css"
      type="text/css"
      rel="stylesheet"
    />
    <link rel="icon" href="./favicon.ico" sizes="any" />
    <!-- 32×32 -->
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <!-- 180×180 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"
    />
  </head>

  <body>
    <!-- ローディングアニメーション↓ -->
    <div id="loader">
      <div class="spinner">
        <div class="cube1"></div>
        <div class="cube2"></div>
      </div>
    </div>
    <!-- ローディングアニメーション↑ -->

    <!-- 非同期処理が完了した後に表示するコンテンツ -->
    <v-app id="app">
      <header>
        <table width="100%" style="border-collapse: collapse">
          <tbody v-if="$vuetify.breakpoint.mdAndUp">
            <tr>
              <th rowspan="3" class="f00_nitro_space"></th>
              <th rowspan="3" class="f00_nitro" @click="handleClick()">
                <span>ニトロ</span>
              </th>
              <th colspan="10" class="f00_nitro_header"></th>
              <th rowspan="3" class="f00_inbreed_space"></th>
              <th rowspan="3" class="f00_inbreed"><span>クロス</span></th>
              <th colspan="10" class="f00_inbreed_header"></th>
              <th rowspan="2" class="table_footer_TH_theory">理論</th>
              <th
                rowspan="3"
                width="5%"
                @click="initializer()"
                style="background-color: #aa0000"
              >
                <v-icon size="x-large" color="white">mdi-reload</v-icon>
              </th>
            </tr>
            <tr class="f00">
              <th class="f01">短</th>
              <th class="f02">速</th>
              <th class="f03">底</th>
              <th class="f04">長</th>
              <th class="f05">砂</th>
              <th class="f06">丈</th>
              <th class="f07">早</th>
              <th class="f08">晩</th>
              <th class="f09">堅</th>
              <th class="f10">難</th>
              <th class="f01">短</th>
              <th class="f02">速</th>
              <th class="f03">底</th>
              <th class="f04">長</th>
              <th class="f05">砂</th>
              <th class="f06">丈</th>
              <th class="f07">早</th>
              <th class="f08">晩</th>
              <th class="f09">堅</th>
              <th class="f10">難</th>
            </tr>
            <tr>
              <th class="factorNumCell">{{factorNumtoString[0]}}</th>
              <th class="factorNumCell">{{factorNumtoString[1]}}</th>
              <th class="factorNumCell">{{factorNumtoString[2]}}</th>
              <th class="factorNumCell">{{factorNumtoString[3]}}</th>
              <th class="factorNumCell">{{factorNumtoString[4]}}</th>
              <th class="factorNumCell">{{factorNumtoString[5]}}</th>
              <th class="factorNumCell">{{factorNumtoString[6]}}</th>
              <th class="factorNumCell">{{factorNumtoString[7]}}</th>
              <th class="factorNumCell">{{factorNumtoString[8]}}</th>
              <th class="factorNumCell">{{factorNumtoString[9]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[0]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[1]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[2]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[3]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[4]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[5]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[6]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[7]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[8]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[9]}}</th>
              <th :class="styleThoeryClass"></th>
            </tr>
          </tbody>

          <tbody v-if="$vuetify.breakpoint.smAndDown">
            <tr>
              <th rowspan="3" class="f00_nitro_space"></th>
              <th rowspan="3" class="f00_nitro" @click="handleClick()">
                <span>ニトロ</span>
              </th>
              <th colspan="7" class="f00_nitro_header"></th>
              <th rowspan="3" class="f00_inbreed_space"></th>
              <th rowspan="3" class="f00_inbreed"><span>クロス</span></th>
              <th colspan="7" class="f00_inbreed_header"></th>
              <th
                v-if="dispCategory%2 === 0"
                rowspan="2"
                class="table_footer_TH_theory"
              >
                理論
              </th>
              <th v-else rowspan="2" class="table_footer_TH_theory">子系</th>
              <th
                rowspan="3"
                width="9%"
                @click="initializer()"
                style="background-color: #aa0000"
              >
                <v-icon size="x-large" color="white">mdi-reload</v-icon>
              </th>
            </tr>
            <tr class="f00">
              <th class="f01">短</th>
              <th class="f02">速</th>
              <th class="f03">底</th>
              <th class="f04">長</th>
              <th class="f07">晩</th>
              <th class="f09">堅</th>
              <th class="f10">難</th>
              <th class="f01">短</th>
              <th class="f02">速</th>
              <th class="f03">底</th>
              <th class="f04">長</th>
              <th class="f07">晩</th>
              <th class="f09">堅</th>
              <th class="f10">難</th>
            </tr>
            <tr>
              <th class="factorNumCell">{{factorNumtoString[0]}}</th>
              <th class="factorNumCell">{{factorNumtoString[1]}}</th>
              <th class="factorNumCell">{{factorNumtoString[2]}}</th>
              <th class="factorNumCell">{{factorNumtoString[3]}}</th>
              <th class="factorNumCell">{{factorNumtoString[7]}}</th>
              <th class="factorNumCell">{{factorNumtoString[8]}}</th>
              <th class="factorNumCell">{{factorNumtoString[9]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[0]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[1]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[2]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[3]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[7]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[8]}}</th>
              <th class="factorNumCell">{{inbreedFactorNumtoString[9]}}</th>
              <th v-if="dispCategory%2 === 0" :class="styleThoeryClass"></th>
              <th v-else>{{categoryNumtoString}}</th>
            </tr>
          </tbody>
        </table>
      </header>

      <main>
        <v-container fluid>
          <v-spacer class="my-1 px-0 mx-0 my-0" />
          <v-row class="mx-1" align-content="center">
            <!-- <v-spacer class="my-1 px-0 mx-0 my-0" /> -->
            <!-- xsを設定できないので↓のようなカンジで -->
            <v-col sm="12" md="6" lg="6" xl="6" cols="12">
              <v-card elevation="3" align-content="center" class="custom-card">
                <v-card-title
                  v-if="this.windowSize >= 770"
                  style="font-size: 16px; font-weight: bolder"
                  class="px-0"
                  outlined
                >
                  種牡馬検索
                </v-card-title>

                <table class="table_main">
                  <tr>
                    <!-- <div :index="0"> -->
                    <td colspan="5" class="horse_all AliceBlue" width="15">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[0]"
                        :index="0"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>

                    <td :class="styleParentLineClasses[0]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[0]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[0] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(0)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[0] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(0)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[0] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[0][0]">
                      {{factorName[0][0]}}
                    </td>
                    <td :class="styleFactorClasses[0][1]">
                      {{factorName[0][1]}}
                    </td>
                    <td :class="styleFactorClasses[0][2]">
                      {{factorName[0][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="1"> -->
                    <td align="center" class="father_0" width="15">父</td>
                    <td colspan="4" class="omoshiro_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[1]"
                        :index="1"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[1]">
                      <span class="styleParentLineText"
                        >{{parentLines[1]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[1]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[1] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(1)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[1] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(1)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[1] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[1][0]">
                      {{factorName[1][0]}}
                    </td>
                    <td :class="styleFactorClasses[1][1]">
                      {{factorName[1][1]}}
                    </td>
                    <td :class="styleFactorClasses[1][2]">
                      {{factorName[1][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="2"> -->
                    <td
                      align="center"
                      class="father_1"
                      rowspan="7"
                      width="15"
                    ></td>
                    <td class="father_0" width="15">父</td>
                    <td colspan="3" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[2]"
                        :index="2"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[2]">
                      <span class="styleParentLineText"
                        >{{parentLines[2]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[2]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[2] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(2)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[2] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(2)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[2] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[2][0]">
                      {{factorName[2][0]}}
                    </td>
                    <td :class="styleFactorClasses[2][1]">
                      {{factorName[2][1]}}
                    </td>
                    <td :class="styleFactorClasses[2][2]">
                      {{factorName[2][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="4"> -->
                    <td
                      align="center"
                      class="father_1"
                      rowspan="3"
                      width="15"
                    ></td>
                    <td class="father_0" width="15">父</td>
                    <td colspan="2" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[4]"
                        :index="4"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[4]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[4]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[4] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(4)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[4] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(4)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[4] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[4][0]">
                      {{factorName[4][0]}}
                    </td>
                    <td :class="styleFactorClasses[4][1]">
                      {{factorName[4][1]}}
                    </td>
                    <td :class="styleFactorClasses[4][2]">
                      {{factorName[4][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="8"> -->
                    <td align="center" class="father_1" width="15"></td>
                    <td class="father" width="15">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[8]"
                        :index="8"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[8]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[8]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[8] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(8)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[8] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(8)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[8] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[8][0]">
                      {{factorName[8][0]}}
                    </td>
                    <td :class="styleFactorClasses[8][1]">
                      {{factorName[8][1]}}
                    </td>
                    <td :class="styleFactorClasses[8][2]">
                      {{factorName[8][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="9"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="migoto_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[9]"
                        :index="9"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[9]">
                      <span class="styleParentLineText"
                        >{{parentLines[9]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[9]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[9] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(9)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[9] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(9)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[9] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[9][0]">
                      {{factorName[9][0]}}
                    </td>
                    <td :class="styleFactorClasses[9][1]">
                      {{factorName[9][1]}}
                    </td>
                    <td :class="styleFactorClasses[9][2]">
                      {{factorName[9][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="5"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0" rowspan="1">父</td>
                    <td colspan="2" class="omoshiro_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[5]"
                        :index="5"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[5]">
                      <span class="styleParentLineText"
                        >{{parentLines[5]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[5]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[5] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(5)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[5] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(5)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[5] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[5][0]">
                      {{factorName[5][0]}}
                    </td>
                    <td :class="styleFactorClasses[5][1]">
                      {{factorName[5][1]}}
                    </td>
                    <td :class="styleFactorClasses[5][2]">
                      {{factorName[5][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="10"> -->
                    <td class="mother_1" rowspan="2"></td>
                    <td class="father_1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[10]"
                        :index="10"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[10]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[10]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[10] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(10)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[10] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(10)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[10] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[10][0]">
                      {{factorName[10][0]}}
                    </td>
                    <td :class="styleFactorClasses[10][1]">
                      {{factorName[10][1]}}
                    </td>
                    <td :class="styleFactorClasses[10][2]">
                      {{factorName[10][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="11"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="migoto_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[11]"
                        :index="11"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[11]">
                      <span class="styleParentLineText"
                        >{{parentLines[11]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[11]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[11] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(11)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[11] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(11)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[11] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[11][0]">
                      {{factorName[11][0]}}
                    </td>
                    <td :class="styleFactorClasses[11][1]">
                      {{factorName[11][1]}}
                    </td>
                    <td :class="styleFactorClasses[11][2]">
                      {{factorName[11][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="3"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0">父</td>
                    <td colspan="3" class="omoshiro_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[3]"
                        :index="3"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[3]">
                      <span class="styleParentLineText"
                        >{{parentLines[3]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[3]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[3] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(3)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[3] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(3)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[3] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[3][0]">
                      {{factorName[3][0]}}
                    </td>
                    <td :class="styleFactorClasses[3][1]">
                      {{factorName[3][1]}}
                    </td>
                    <td :class="styleFactorClasses[3][2]">
                      {{factorName[3][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="6"> -->
                    <td class="mother_1" rowspan="6"></td>
                    <td class="father_1" rowspan="3"></td>
                    <td class="father_0">父</td>
                    <td colspan="2" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[6]"
                        :index="6"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[6]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[6]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[6] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(6)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[6] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(6)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[6] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[6][0]">
                      {{factorName[6][0]}}
                    </td>
                    <td :class="styleFactorClasses[6][1]">
                      {{factorName[6][1]}}
                    </td>
                    <td :class="styleFactorClasses[6][2]">
                      {{factorName[6][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="12"> -->
                    <td class="father_1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[12]"
                        :index="12"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[12]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[12]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[12] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(12)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[12] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(12)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[12] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[12][0]">
                      {{factorName[12][0]}}
                    </td>
                    <td :class="styleFactorClasses[12][1]">
                      {{factorName[12][1]}}
                    </td>
                    <td :class="styleFactorClasses[12][2]">
                      {{factorName[12][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="13"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="migoto_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[13]"
                        :index="13"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[13]">
                      <span class="styleParentLineText"
                        >{{parentLines[13]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[13]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[13] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(13)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[13] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(13)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[13] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[13][0]">
                      {{factorName[13][0]}}
                    </td>
                    <td :class="styleFactorClasses[13][1]">
                      {{factorName[13][1]}}
                    </td>
                    <td :class="styleFactorClasses[13][2]">
                      {{factorName[13][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="7"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0">父</td>
                    <td colspan="2" class="omoshiro_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[7]"
                        :index="7"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[7]">
                      <span class="styleParentLineText"
                        >{{parentLines[7]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[7]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[7] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(7)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[7] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(7)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[7] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[7][0]">
                      {{factorName[7][0]}}
                    </td>
                    <td :class="styleFactorClasses[7][1]">
                      {{factorName[7][1]}}
                    </td>
                    <td :class="styleFactorClasses[7][2]">
                      {{factorName[7][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="14"> -->
                    <td class="mother_1" rowspan="2"></td>
                    <td class="father_1" rowspan="1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[14]"
                        :index="14"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[14]">
                      <span class="styleParentLineText"></span>
                    </td>
                    <td :class="styleInbreedButtonClasses[14]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[14] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(14)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[14] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(14)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[14] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[14][0]">
                      {{factorName[14][0]}}
                    </td>
                    <td :class="styleFactorClasses[14][1]">
                      {{factorName[14][1]}}
                    </td>
                    <td :class="styleFactorClasses[14][2]">
                      {{factorName[14][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="15"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="migoto_0">
                      <!-- カスタムコンポーネントで定義しています（母もあり） -->
                      <common-autocomplete
                        :class="dispColor[15]"
                        :index="15"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[15]">
                      <span class="styleParentLineText"
                        >{{parentLines[15]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[15]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[15] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(15)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[15] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(15)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[15] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[15][0]">
                      {{factorName[15][0]}}
                    </td>
                    <td :class="styleFactorClasses[15][1]">
                      {{factorName[15][1]}}
                    </td>
                    <td :class="styleFactorClasses[15][2]">
                      {{factorName[15][2]}}
                    </td>
                  </tr>
                </table>
                <v-spacer class="my-1 px-0 mx-0 my-0" />
              </v-card>
            </v-col>
            <!-- xsを設定できないので↓のようなカンジで -->
            <v-col sm="12" md="6" lg="6" xl="6" cols="12">
              <v-card elevation="3" align-content="center" class="custom-card">
                <v-card-title
                  v-if="this.windowSize >= 770"
                  style="font-size: 16px; font-weight: bolder"
                  class="px-0"
                  outlined
                >
                  繫殖牝馬検索
                </v-card-title>

                <!-- 繫殖牝馬側 -->
                <table class="table_main">
                  <tr>
                    <!-- <div :index="0"> -->
                    <td colspan="5" class="horse_all SalmonPink" width="15">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[0+16]"
                        :index="0+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[0 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[0 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[0 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[0 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(0 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[0 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(0 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[0 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[0 + 16][0]">
                      {{factorName[0 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[0 + 16][1]">
                      {{factorName[0 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[0 + 16][2]">
                      {{factorName[0 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="1"> -->
                    <td align="center" class="father_0" width="15">父</td>
                    <td colspan="4" class="horse_all Broodmare" width="15">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[1+16]"
                        :index="1+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[1 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[1 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[1 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[1 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(1 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[1 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(1 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[1 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[1 + 16][0]">
                      {{factorName[1 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[1 + 16][1]">
                      {{factorName[1 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[1 + 16][2]">
                      {{factorName[1 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="2"> -->
                    <td
                      align="center"
                      class="father_1"
                      rowspan="7"
                      width="15"
                    ></td>
                    <td class="father_0" width="15">父</td>
                    <td colspan="3" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[2+16]"
                        :index="2+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[2 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[2 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[2 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[2 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(2 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[2 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(2 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[2 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[2 + 16][0]">
                      {{factorName[2 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[2 + 16][1]">
                      {{factorName[2 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[2 + 16][2]">
                      {{factorName[2 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="4"> -->
                    <td
                      align="center"
                      class="father_1"
                      rowspan="3"
                      width="15"
                    ></td>
                    <td class="father_0" width="15">父</td>
                    <td colspan="2" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[4+16]"
                        :index="4+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[4 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[4 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[4 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[4 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(4 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[4 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(4 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[4 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[4 + 16][0]">
                      {{factorName[4 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[4 + 16][1]">
                      {{factorName[4 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[4 + 16][2]">
                      {{factorName[4 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="8"> -->
                    <td align="center" class="father_1" width="15"></td>
                    <td class="father" width="15">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[8+16]"
                        :index="8+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[8 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[8 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[8 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[8 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(8 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[8 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(8 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[8 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[8 + 16][0]">
                      {{factorName[8 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[8 + 16][1]">
                      {{factorName[8 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[8 + 16][2]">
                      {{factorName[8 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="9"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[9+16]"
                        :index="9+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[9 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[9 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[9 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[9 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(9 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[9 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(9 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[9 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[9 + 16][0]">
                      {{factorName[9 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[9 + 16][1]">
                      {{factorName[9 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[9 + 16][2]">
                      {{factorName[9 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="5"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0" rowspan="1">父</td>
                    <td colspan="2" class="horse_all Broodmare">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[5+16]"
                        :index="5+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[5 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[5 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[5 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[5 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(5 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[5 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(5 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[5 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[5 + 16][0]">
                      {{factorName[5 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[5 + 16][1]">
                      {{factorName[5 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[5 + 16][2]">
                      {{factorName[5 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="10"> -->
                    <td class="mother_1" rowspan="2"></td>
                    <td class="father_1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[10+16]"
                        :index="10+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[10 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[10 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[10 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[10 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(10 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[10 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(10 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[10 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[10 + 16][0]">
                      {{factorName[10 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[10 + 16][1]">
                      {{factorName[10 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[10 + 16][2]">
                      {{factorName[10 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="11"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[11+16]"
                        :index="11+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[11 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[11 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[11 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[11 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(11 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[11 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(11 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[11 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[11 + 16][0]">
                      {{factorName[11 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[11 + 16][1]">
                      {{factorName[11 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[11 + 16][2]">
                      {{factorName[11 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="3"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0">父</td>
                    <td colspan="3" class="horse_all Broodmare">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[3+16]"
                        :index="3+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[3 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[3 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[3 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[3 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(3 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[3 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(3 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[3 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[3 + 16][0]">
                      {{factorName[3 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[3 + 16][1]">
                      {{factorName[3 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[3 + 16][2]">
                      {{factorName[3 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="6"> -->
                    <td class="mother_1" rowspan="6"></td>
                    <td class="father_1" rowspan="3"></td>
                    <td class="father_0">父</td>
                    <td colspan="2" class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[6+16]"
                        :index="6+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[6 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[6 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[6 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[6 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(6 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[6 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(6 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[6 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[6 + 16][0]">
                      {{factorName[6 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[6 + 16][1]">
                      {{factorName[6 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[6 + 16][2]">
                      {{factorName[6 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="12"> -->
                    <td class="father_1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[12+16]"
                        :index="12+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[12 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[12 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[12 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[12 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(12 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[12 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(12 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[12 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[12 + 16][0]">
                      {{factorName[12 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[12 + 16][1]">
                      {{factorName[12 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[12 + 16][2]">
                      {{factorName[12 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="13"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[13+16]"
                        :index="13+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[13 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[13 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[13 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[13 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(13 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[13 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(13 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[13 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[13 + 16][0]">
                      {{factorName[13 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[13 + 16][1]">
                      {{factorName[13 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[13 + 16][2]">
                      {{factorName[13 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="7"> -->
                    <td class="mother_0">母</td>
                    <td class="father_0">父</td>
                    <td colspan="2" class="horse_all Broodmare">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[7+16]"
                        :index="7+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[7 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[7 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[7 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[7 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(7 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[7 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(7 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[7 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[7 + 16][0]">
                      {{factorName[7 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[7 + 16][1]">
                      {{factorName[7 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[7 + 16][2]">
                      {{factorName[7 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="14"> -->
                    <td class="mother_1" rowspan="2"></td>
                    <td class="father_1" rowspan="1"></td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[14+16]"
                        :index="14+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[14 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[14 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[14 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[14 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(14 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[14 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(14 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[14 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[14 + 16][0]">
                      {{factorName[14 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[14 + 16][1]">
                      {{factorName[14 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[14 + 16][2]">
                      {{factorName[14 + 16][2]}}
                    </td>
                  </tr>

                  <tr>
                    <!-- <div :index="15"> -->
                    <td class="mother">母</td>
                    <td class="father">父</td>
                    <td class="horse_0">
                      <!-- カスタムコンポーネントで定義しています -->
                      <common-autocomplete
                        :class="dispColor[15+16]"
                        :index="15+16"
                        :selected="selected"
                        :horses="horseDataLists"
                        :on-change="onChange"
                        :disp-category="dispCategory"
                        :category="category"
                      ></common-autocomplete>
                    </td>
                    <td :class="styleParentLineClasses[15 + 16]">
                      <span class="styleParentLineText"
                        >{{parentLines[15 + 16]}}</span
                      >
                    </td>
                    <td :class="styleInbreedButtonClasses[15 + 16]">
                      <v-btn
                        v-if="this.isInbreedButtonClicked[15 + 16] === -1"
                        :key="reload"
                        @click="handleInbreedButtonClick(15 + 16)"
                        icon
                        v-bind="size"
                        ><v-icon>mdi-heart-outline</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[15 + 16] === 1"
                        :key="reload"
                        @click="handleInbreedButtonClick(15 + 16)"
                        icon
                        color="pink"
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                      <v-btn
                        v-else-if="this.isInbreedButtonClicked[15 + 16] === 0"
                        :key="reload"
                        icon
                        color="pink"
                        disabled
                        v-bind="size"
                        ><v-icon>mdi-heart</v-icon></v-btn
                      >
                    </td>
                    <td :class="styleFactorClasses[15 + 16][0]">
                      {{factorName[15 + 16][0]}}
                    </td>
                    <td :class="styleFactorClasses[15 + 16][1]">
                      {{factorName[15 + 16][1]}}
                    </td>
                    <td :class="styleFactorClasses[15 + 16][2]">
                      {{factorName[15 + 16][2]}}
                    </td>
                  </tr>
                </table>
                <!-- <v-spacer class="my-1 px-0 mx-0 my-0" /> -->
              </v-card>
            </v-col>
          </v-row>
        </v-container>
      </main>
    </v-app>
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.14/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>

  <script>
    //loadingAnimation
    window.onload = () => {
      const loader = document.getElementById("loader");
      loader.classList.add("loaded");
    };

    // service workerの登録関係
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("./service-worker.js")
        .then(function (registration) {
          console.log(
            "ServiceWorker registration successful with scope: ",
            registration.scope
          );
        })
        .catch(function (err) {
          console.log("ServiceWorker registration failed: ", err);
        });
    }

    var ua = navigator.userAgent.toLowerCase();
    var isiOS = ua.indexOf("iphone") > -1 || ua.indexOf("ipad") > -1;
    if (isiOS) {
      var viewport = document.querySelector('meta[name="viewport"]');
      if (viewport) {
        var viewportContent = viewport.getAttribute("content");
        viewport.setAttribute(
          "content",
          viewportContent + ", user-scalable=no"
        );
      }
    }

    const factorMap = new Map();

    Vue.component("common-table-component", {
      template: `
        <td :class="styleFactorClass1"><span v-text="factorName1"></span></td>
        <td :class="styleFactorClass2"><span v-text="factorName2"></span></td>
        <td :class="styleFactorClass3"><span v-text="factorName3"></span></td>
    `,
      computed: {
        styleFactorClass1(newValue) {
          // return newValue.styleParentLineClasses[this.index];
          console.log(newValue.index);
          return "factor_omoshiro styleFactorClassMain";
        },
        styleFactorClass2(newValue) {
          // return newValue.styleParentLineClasses[this.index];
          console.log(newValue.index);
          return "factor_omoshiro styleFactorClassMain";
        },
        styleFactorClass3(newValue) {
          // return newValue.styleParentLineClasses[this.index];
          console.log(newValue.index);
          if (newValue.index === 1) {
            return "factor_omoshiro styleFactorClassMain";
          }
        },
        styleParentLineClass(newValue) {
          // return newValue.styleParentLineClasses[this.index];
          return "factor_omoshiro styleParentLine";
        },
      },
      watch: {
        abc: {
          handler: (v) =>
            (styleFactorClassA = "factor_omoshiro styleFactorClassMain"),
          immediate: true,
        },
      },
      props: {
        index: {
          type: Number,
          required: true,
        },
        styleParentLineClasses: {
          type: Array,
          required: true,
        },
        factorName: {
          type: Array,
          required: true,
        },
        abc: {
          type: Array,
          required: true,
        },
        parentLines: {
          type: Array,
          required: true,
        },
      },
    });

    // カスタムコンポーネント定義（コンボボックス）
    Vue.component("common-autocomplete", {
      template: `
      <v-autocomplete
        v-if="dispCategory%2 === 0"
        :value="selected[index]"
        :items="lists"
        :item-text="horse => horse.name + horse.subName"
        solo
        dense
        :placeholder="placeholderText"
        no-data-text="該当するデータはありません"
        @input="onChange(sex, index - (sex * 16), $event)"
        return-object
      >
        <template v-slot:item="data">
          <template >
            <v-list-item-content>
              <v-list-item-title v-html="getHorse(data.item)"></v-list-item-title>
            </v-list-item-content>
          </template>
		    </template>
      </v-autocomplete>
      <v-text-field
        v-else
        :value="category[index]"
        solo
        readonly
      ></v-text-field>
    `,
      props: {
        index: {
          type: Number,
          required: true,
        },
        selected: {
          type: Array,
          required: true,
        },
        horses: {
          type: Array,
          required: true,
        },
        onChange: {
          type: Function,
          required: true,
        },
        dispCategory: {
          type: Number,
          required: true,
        },
        category: {
          type: Array,
          required: true,
        },
      },
      methods: {
        getHorse(horse) {
          if (!horse?.disabled) {
            return horse.name + horse.subName + this.getFactor(horse.factors);
          }
        },
        getFactor(factors) {
          let retFactor = "";
          if (factors[2] != "") {
            retFactor = "(";
            for (const factor in factors) {
              if (factor) {
                retFactor += factors[factor];
              }
            }
            retFactor += ")";
          }
          return retFactor;
        },
      },
      computed: {
        placeholderText(newValue) {
          if (
            Math.floor(newValue.index / 16) === 1 &&
            newValue.index % 16 === 0
          ) {
            return "繫殖牝馬を選んでください";
          } else {
            switch (newValue.index % 16) {
              case 3:
              case 5:
              case 7:
              case 9:
              case 11:
              case 13:
              case 15:
                return "種牡馬 or 繫殖牝馬を選んでください";
                break;
              default:
                return "種牡馬を選んでください";
                break;
            }
          }
        },
        sex(newValue) {
          // index>=16が牝馬
          return Math.floor(newValue.index / 16);
        },
        // 馬のリスト
        lists(newValue) {
          let retList;

          if (this.sex === 1 && this.index % 16 === 0) {
            //繫殖牝馬をセット
            retList = this.horses[2];
          } else {
            switch (this.index % 16) {
              case 3:
              case 5:
              case 7:
              case 9:
              case 11:
              case 13:
              case 15:
                // 種牡馬と繫殖牝馬をセット
                retList = this.horses[0];
                break;
              default:
                // 種牡馬のみをセット
                retList = this.horses[1];
                break;
            }
          }
          return retList;
        },
      },
    });

    Vue.component("common-inbreed-component", {
      template: `
      <td :class="styleInbreedButtonClasses[index]">
        <v-btn :key="'btn-' + index" @click="handleInbreedButtonClick(index)" icon :class="{'pink': isInbreedButtonClicked[index] === 1}" :disabled="isInbreedButtonClicked[index] === 0" v-bind="size"><v-icon :class="{'mdi-heart': isInbreedButtonClicked[index] !== -1, 'mdi-heart-outline': isInbreedButtonClicked[index] === -1}"></v-icon></v-btn>
      </td>
    `,
      data: function () {
        return {
          size: {},
        };
      },
      props: {
        index: {
          type: Number,
          required: true,
        },
        styleInbreedButtonClasses: {
          type: Array,
          required: true,
        },
        isInbreedButtonClicked: {
          type: Array,
          required: true,
        },
        handleInbreedButtonClick: {
          type: Function,
          required: true,
        },
      },
      created() {
        const btnSize = {
          xs: "x-small",
          md: "small",
          sm: "small",
          lg: "small",
          xl: "small",
        };
        const size = btnSize[this.$vuetify.breakpoint.name];
        this.size = { [size]: true };
      },
    });

    new Vue({
      el: "#app",
      vuetify: new Vuetify(),

      data() {
        return {
          windowSize: 0,
          dispColor: Array.from(new Array(32).fill("")),
          horseDataLists: [[], [], []],
          factorCd: Array.from(new Array(32), () => new Array(3).fill("00")),
          selected: Array.from(new Array(32).fill(null)),
          // 親系統
          parentLines: Array.from(new Array(32).fill("")),
          // 子系統
          category: Array.from(new Array(32).fill(null)),
          stallions: [],
          stallionsBase: [],
          broodmares: [],
          broodmaresBase: [],
          theoryOmoshiro: [1, 3, 5, 7],
          theoryMigoto: [9, 11, 13, 15],

          // インブリードボタン押下フラグを一次元配列で定義（-1：未クリック　1：クリック　0:使用不可）
          isInbreedButtonClicked: Array.from(new Array(32).fill(0)),
          // styleInbreedButtonClasses（インブリードさせるボタン定義）を一次元配列で定義
          styleInbreedButtonClasses: Array.from(new Array(32).fill("")),
          // styleFactorClassesを二次元配列で定義
          styleFactorClasses: Array.from(new Array(32), () =>
            new Array(3).fill("00")
          ),
          // factorNameを二次元配列で定義
          factorName: Array.from(new Array(32), () => new Array(3).fill("")),

          // styleParentLineClassesを一次元配列で定義
          styleParentLineClasses: Array.from(new Array(32).fill("")),
          // 合計因子数表示
          factorNumtoString: Array.from(new Array(10).fill("00")),
          // インブリードされた因子数表示
          inbreedFactorNumtoString: Array.from(new Array(10).fill("00")),
          // 子系統数
          categoryNumtoString: "00",

          // 配合理論
          styleThoeryClass: "",

          // リストで選択された性別
          selectedSex: null,

          // 子系統を表示させるフラグ
          dispCategory: 0,

          // インブリードされているところを格納する変数
          inbreedList: Array.from(new Array(32).fill(null)),
          reload: 0,
          size: {},
        };
      },

      //async created () {
      created() {
        const btnSize = {
          xs: "x-small",
          md: "small",
          sm: "small",
          lg: "small",
          xl: "small",
        };
        const size = btnSize[this.$vuetify.breakpoint.name];
        this.size = { [size]: true };
      },

      mounted: function () {
        try {
          this.c1()
            .then(() => this.c2())
            .then(() => this.c3());
          // .finally(() => this.c4());
        } catch (error) {
          console.error(error);
        }
      },

      methods: {
        c1: function () {
          return new Promise((resolve, reject) => {
            // jsonファイル読み込みが終わるまで非同期処理を待つ（async/await）
            // await this.dbinitializer();
            this.dbinitializer();
            resolve(() => {});
          });
        },
        c2: function () {
          return new Promise((resolve, reject) => {
            console.log(this.$vuetify.breakpoint.name);
            console.log("window.innerHeight", window.innerHeight);
            resolve((this.windowSize = window.innerHeight));
          });
        },
        c3: function () {
          return new Promise((resolve, reject) => {
            // 因子を数字に変換するmapオブジェクト
            //this.factorMap = new map();
            factorMap.set("", "00");
            factorMap.set("短", "01");
            factorMap.set("速", "02");
            factorMap.set("底", "03");
            factorMap.set("長", "04");
            factorMap.set("ダ", "05");
            factorMap.set("丈", "06");
            factorMap.set("早", "07");
            factorMap.set("晩", "08");
            factorMap.set("堅", "09");
            factorMap.set("難", "10");

            // 因子部分のCSS設定
            for (var i = 0; i < this.styleFactorClasses.length; i++) {
              let css = "";
              css = this.getCss(i);
              this.styleFactorClasses[i][0] = `${css} styleFactorClassMain`;
              this.styleFactorClasses[i][1] = `${css} styleFactorClassMain`;
              this.styleFactorClasses[i][2] = `${css} styleFactorClassMain`;
            }

            // 血統理論部分のCSS
            for (var i = 0; i < this.styleParentLineClasses.length; i++) {
              let css = "";
              css = this.getCss(i);
              this.styleParentLineClasses[i] = `${css} styleParentLine`;
            }

            // インブリードボタン部分のCSS
            for (var i = 0; i < this.styleInbreedButtonClasses.length; i++) {
              let css = "";
              css = this.getCss(i);
              this.styleInbreedButtonClasses[i] = `${css} styleInbreedButton`;
            }
          });
        },
        c4: function () {
          return new Promise((resolve, reject) => {
            if (window.localStorage) {
              if (JSON.parse(localStorage.getItem("dabimasFactor"))) {
                // localStorageに入れていたものを復元する
                this.restoreInputData();
              }
            }
          });
        },
        // ハート（強制インブリード）ボタンクリック時
        handleInbreedButtonClick: function (index) {
          // それぞれのボタンコンポーネントのキーを更新（再レンダリングさせたいから）
          const changedIsButtonClicked =
            this.isInbreedButtonClicked[index] * -1;
          if (changedIsButtonClicked === 1) {
            this.dispColor[index] = "inbreed";
            this.inbreedList[index] = {
              ...this.selected[index],
              selfInbreed: true,
            };
          } else {
            this.dispColor[index] = "";
            this.inbreedList[index] = null;
          }

          // async/await関数を定義
          const dispFunction = async () => {
            // インブリード本数判定表示
            await this.dispInbreedFactorCounts();
            // フラグを反転結果
            this.isInbreedButtonClicked[index] = changedIsButtonClicked;
            this.reload++;
          };
          // async/await関数を実行
          dispFunction();
        },

        // 復元処理
        restoreInputData: function () {
          const parseArray = JSON.parse(localStorage.getItem("dabimasFactor"));
          // ローカルストレージから取得したものでnull要素は排除してからセット
          this.horses = [
            ...Array.from(this.horsesBase),
            ...parseArray.filter((v) => v),
          ];
          this.stallions = [
            ...Array.from(this.stallionsBase),
            ...parseArray.filter((v) => v),
          ];
          this.broodmares = [
            ...Array.from(this.broodmaresBase),
            parseArray[16] ? parseArray[16] : "",
          ];
          this.horseDataLists = [this.horses, this.stallions, this.broodmares];
          this.selected = JSON.parse(localStorage.getItem("dabimasFactor"));
          this.category = JSON.parse(
            localStorage.getItem("dabimasFactorCategory")
          );

          // 因子・親系統を詰める
          this.selected.map((element, index) => {
            for (let i = 0; i < 3; i++) {
              this.setFactorName(index, i, element?.factors[i]);
              this.setFactorCd(
                index,
                i,
                factorMap.get(element?.factors[i]) ?? "00"
              );
              this.setFactorCss(
                index,
                i,
                this.fillInFactorCells(this.factorCd[index][i], index)
              );
            }
            this.setParentLine(
              index,
              this.judgeSetParentLine(element?.parentLine, index)
            );
          });

          // カウントした画面に表示させる
          this.factorNumtoString = this.dispFactorCounts(this.factorCd);
          this.categoryNumtoString = this.dispCategoryCount();
          // 配合理論を求めて画面に表示させる
          this.dispTheory();
          // クロスを判定して表示させる
          this.dispInbreed();
        },

        initializer() {
          // localStorageをクリア
          localStorage.removeItem("dabimasFactor");

          this.selected = Array.from(new Array(32).fill(null));
          this.category = Array.from(new Array(32).fill(null));
          this.dispColor = Array.from(new Array(32).fill(""));
          // baseをコピーする
          this.stallions = [...this.stallionsBase];
          this.broodmares = [...this.broodmaresBase];
          this.horses = [...this.horsesBase];
          this.horseDataLists = [this.horses, this.stallions, this.broodmares];

          // 因子部分のCSS初期設定
          for (var i = 0; i < this.styleFactorClasses.length; i++) {
            let css = "";
            css = this.getCss(i);
            this.styleFactorClasses[i][0] = `${css} styleFactorClassMain`;
            this.styleFactorClasses[i][1] = `${css} styleFactorClassMain`;
            this.styleFactorClasses[i][2] = `${css} styleFactorClassMain`;
          }

          // 血統理論部分のCSS初期設定
          for (var i = 0; i < this.styleParentLineClasses.length; i++) {
            let css = "";
            css = this.getCss(i);
            this.styleParentLineClasses[i] = `${css} styleParentLine`;
          }

          // factorNameを二次元配列で定義
          this.factorName = Array.from(new Array(32), () =>
            new Array(3).fill("")
          );

          // 合計因子数表示
          this.factorNumtoString = Array.from(new Array(10).fill("00"));
          // インブリード因子数表示
          this.inbreedFactorNumtoString = Array.from(new Array(10).fill("00"));
          // 子系統数
          this.categoryNumtoString = "00";

          // 合計因子数内部変数
          this.factorCd = Array.from(new Array(32), () =>
            new Array(3).fill("00")
          );
          // 親系統表示
          this.parentLines = Array.from(new Array(32).fill(""));

          // 理論表示
          this.styleThoeryClass = "";
          // インブリードされているところを格納する変数
          this.inbreedList = Array.from(new Array(32).fill(null));

          // インブリードボタン押下フラグを一次元配列で定義（-1：未クリック　1：クリック　0:使用不可）
          this.isInbreedButtonClicked = Array.from(new Array(32).fill(0));
          // 子系統を表示させるフラグ
          this.dispCategory = 0;

          this.reload++;
        },
        handleClick() {
          this.dispCategory++;
          console.log("dispCategory:" + this.dispCategory);
        },
        getCss: function (i) {
          let css = "";
          switch (i) {
            case 0:
              css = "factor_AliceBlue";
              break;
            // （+ 16）は牝馬のほう
            case 0 + 16:
              css = "factor_SalmonPink";
              break;
            // （+ 16）は牝馬のほう
            case 1:
            case 3:
            case 5:
            case 7:
            case 1 + 16:
            case 3 + 16:
            case 5 + 16:
            case 7 + 16:
              css = "factor_omoshiro";
              break;
            case 9:
            case 11:
            case 13:
            case 15:
              css = "factor_migoto";
              break;
            default:
              css = "factor_horse";
              break;
          }
          return css;
        },

        dbinitializer() {
          fetch("./json/dabimasFactor.json")
            .then((response) => {
              return response.json();
            })
            .then((json) => {
              // jsonから取得
              this.horsesBase = json.horseLists;
              //this.allHorses = [...this.allHorsesBase];
              this.horses = this.horsesBase.filter(function (horse) {
                return horse.sex === "0" || horse.sex === "1";
              });

              // 牡馬だけを抽出
              this.stallionsBase = this.horses.filter(function (horse) {
                return horse.sex === "0";
              });
              this.stallions = [...this.stallionsBase];

              // 牝馬だけを抽出
              this.broodmaresBase = this.horses.filter(function (horse) {
                return horse.sex === "1";
              });
              this.broodmares = [...this.broodmaresBase];

              this.horseDataLists = [
                this.horses,
                this.stallions,
                this.broodmares,
              ];

              // 保存されていた場合はリストア処理を行う
              this.c4();
            });
        },
        // ドロップダウンリスト選択時
        // onChange: function (sex, id, horseData, event) {
        onChange: function (sex, id, horseData) {
          this.onChangeMain(sex, id, horseData);
        },

        // 選択時のメイン処理
        onChangeMain: function (sex, id, horseData) {
          if (horseData) {
            // リストにセットされた場合
            // 血統表データセット用に詰め替える
            const dataForPedigree = this.setDataForPedigree(sex, id, horseData);
            // 血統表にデータをセットする
            this.setPedigree(sex, id, dataForPedigree);
          } else {
            // リストを空にした場合（削除モード）
            this.deleteHorses(sex, id);
          }

          // カウントした画面に表示させる
          this.factorNumtoString = this.dispFactorCounts(this.factorCd);
          // カウントした子系統数を表示させる
          this.categoryNumtoString = this.dispCategoryCount();
          console.log("categoryNumtoString:", this.categoryNumtoString);

          // 配合理論を求めて画面に表示させる
          this.dispTheory();

          // クロスを判定して表示させる
          this.dispInbreed();

          // 内容をローカルに保存する
          localStorage.setItem("dabimasFactor", JSON.stringify(this.selected));
          localStorage.setItem(
            "dabimasFactorCategory",
            JSON.stringify(this.category)
          );
        },

        // リストから削除
        deleteHorses: function (sex, id) {
          // 削除したいUUIDを取得する
          const deleteUuid = this.selected[id + sex * 16].uuid;

          // 削除するUUIDを持つリストを検索する
          const deleteHorseList = this.selected.filter(
            (horse) => horse && horse.uuid === deleteUuid
          );
          // 該当するものがあれば、それに該当するものを削除する
          for (const deleteHorse of deleteHorseList) {
            const deleteIndex = deleteHorse.index;

            // リストから選択できない種牡馬をリストから削除する
            // 削除したい名前をセット
            const deleteName = this.selected[deleteIndex]?.name;
            const deleteSubName = this.selected[deleteIndex]?.subName;
            const deleteDisabled = this.selected[deleteIndex]?.disabled;

            // ほかのところで同じ馬が設定されているのかチェック
            const duplicateCheck = this.selected.filter(
              (horse) =>
                horse &&
                horse.name === deleteName &&
                horse.subName === deleteSubName &&
                horse.uuid !== deleteUuid
            );

            // ほかのところで同じ馬が設定されていない場合は配列から削除する
            if (duplicateCheck.length === 0) {
              // 削除したい名前が配列のどこにあるのか取得
              const deleteHorsesIndex = this.horses.findIndex(
                (object) =>
                  object?.name === deleteName &&
                  object?.subName === deleteSubName &&
                  object?.disabled === true
              );
              const deleteStallionsIndex = this.stallions.findIndex(
                (object) =>
                  object?.name === deleteName &&
                  object?.subName === deleteSubName &&
                  object?.disabled === true
              );
              const deleteBroodmaresIndex = this.broodmares.findIndex(
                (object) =>
                  object?.name === deleteName && object?.disabled === true
              );

              // 取得した配列の位置のものを削除する
              if (deleteHorsesIndex !== -1) {
                this.horses.splice(deleteHorsesIndex, 1);
              }
              if (deleteStallionsIndex !== -1) {
                this.stallions.splice(deleteStallionsIndex, 1);
              }
              if (deleteBroodmaresIndex !== -1) {
                this.broodmares.splice(deleteBroodmaresIndex, 1);
              }
            }
            // リストから消す
            this.selected[deleteHorse.index] = null;
            this.category[deleteHorse.index] = null;

            this.factorName[deleteIndex][0] = "";
            this.factorName[deleteIndex][1] = "";
            this.factorName[deleteIndex][2] = "";

            this.factorCd[deleteIndex][0] = "";
            this.factorCd[deleteIndex][1] = "";
            this.factorCd[deleteIndex][2] = "";

            this.parentLines[deleteIndex] = "";

            // CSSを初期化
            let css = "";
            css = this.getCss(deleteIndex);
            this.styleFactorClasses[
              deleteIndex
            ][0] = `${css} styleFactorClassMain`;
            this.styleFactorClasses[
              deleteIndex
            ][1] = `${css} styleFactorClassMain`;
            this.styleFactorClasses[
              deleteIndex
            ][2] = `${css} styleFactorClassMain`;
            this.styleParentLineClasses[deleteIndex] = `${css} styleParentLine`;
          }
          this.horseDataLists = [this.horses, this.stallions, this.broodmares];
        },
        // インブリード表示
        dispInbreed: function () {
          //
          // let retInbreedArray = [];
          let retInbreedCount = 0;
          // 血統表が全部埋まっている場合に判定処理を行う
          if (this.selected.every((e) => e)) {
            // インブリードボタンクリック済フラグを未クリックに設定
            this.isInbreedButtonClicked = Array.from(new Array(32).fill(-1));
            // インブリード判定処理のメイン
            // retInbreedArray = this.judgeInbreed();
            retInbreedCount = this.judgeInbreed();
          } else {
            // インブリードボタンクリック済フラグを非活性モードに設定
            this.isInbreedButtonClicked = Array.from(new Array(32).fill(0));
            this.reload++;
            // インブリードの色も初期化
            this.dispColor = Array.from(new Array(32).fill(""));
            // インブリード因子数表示
            this.inbreedFactorNumtoString = Array.from(
              new Array(10).fill("00")
            );
            // インブリードされているところを格納する変数
            this.inbreedList = Array.from(new Array(32).fill(null));
          }

          // インブリードが発生した場合
          if (retInbreedCount > 0) {
            this.dispInbreedFactorCounts();
          }
        },

        // インブリード本数表示
        dispInbreedFactorCounts: function () {
          // 自動クロスされたところのボタンを非活性化させる
          this.inbreedList.map((element, index) => {
            if (element?.name && !element.selfInbreed) {
              this.isInbreedButtonClicked[index] = 0;
            }
          });

          // 空文字、数字、(で始まる
          const excludeString = /^$|^\d*$|^\(.+?\)/;
          let inbreedArray = [];
          this.inbreedList.map((value, loopIndex) => {
            if (value) {
              // subNameが(で始まる場合は繫殖牝馬選択時／数字は因名被りなのでそれは削除する
              inbreedArray.push({
                name: value.name,
                subName: excludeString.test(value.subName)
                  ? "dummy"
                  : value.subName,
                factors: value.factors,
                selfInbreed: false,
              });
            }
          });

          const factorCd = Array.from(new Array(32), () =>
            new Array(3).fill("00")
          );
          // 重複を削除する
          const inbreedArraySimple = inbreedArray.filter(
            ({ name, subName }, i) =>
              i ===
              inbreedArray.findIndex(
                (e) => e?.name === name && e?.subName === subName
              )
          );

          // 因子をコード変換（ex.速→02）させる
          if (inbreedArraySimple) {
            inbreedArraySimple.map((element, index) => {
              factorCd[index][0] = factorMap.get(element?.factors[0]) ?? "00";
              factorCd[index][1] = factorMap.get(element?.factors[1]) ?? "00";
              factorCd[index][2] = factorMap.get(element?.factors[2]) ?? "00";
            });
          }

          // インブリードした因子数をカウントする
          this.inbreedFactorNumtoString = this.dispFactorCounts(factorCd);

          console.log(this.inbreedFactorNumtoString);
        },

        // インブリード判定
        judgeInbreed: function () {
          let stallionsArray = [];
          let broodmaresArray = [];

          this.selected.map((value, loopIndex) => {
            if (loopIndex < 16) {
              // 種牡馬の配列を取得
              stallionsArray.push({ ...value, ownIndex: loopIndex });
            } else {
              // 繁殖牝馬の配列を取得
              broodmaresArray.push({ ...value, ownIndex: loopIndex - 16 });
            }
          });

          const allArray = [[...stallionsArray], [...broodmaresArray]];

          // インブリードチェック結果
          let checkResultInbreed = Array.from(new Array(32).fill(null));

          let i = 0;
          //   // 相手の取得（配列の添え字が0なら1で、1なら0の値を取得する）
          //   const partnerArray = allArray[Math.abs(~j)];

          for (const horse of broodmaresArray) {
            // インブリード判定を除外する要素を格納する
            let overWriteQue = [];
            // test
            let overWriteQueMare = [];

            // チェック１
            // 種側に姉妹・肌側に兄弟がいる判定　subNameに()が付いているものが繁殖牝馬名
            const tmpInbreedAllBrothers = stallionsArray.filter(
              (partner) =>
                (partner.subName.substring(0, 1) === "(" &&
                  !horse.fullSisters.every((value) => value === "") &&
                  horse.fullSisters.some(
                    (value) =>
                      value ===
                      partner.subName.substring(1, partner.subName.length - 1)
                  ) &&
                  partner.selectedHorse === horse.selectedHorse &&
                  horse.name === horse.selectedHorse) ||
                (partner.subName.substring(0, 1) === "(" &&
                  !horse.fullSisters.every((value) => value === "") &&
                  horse.fullSisters.some(
                    (value) =>
                      value ===
                      partner.subName.substring(1, partner.subName.length - 1)
                  ) &&
                  partner.selectedHorse !== horse.selectedHorse)
            );

            if (tmpInbreedAllBrothers.length > 0) {
              // 種側に姉妹・肌側に兄弟がいた場合
              for (const tmpInbreed of tmpInbreedAllBrothers) {
                // インブリードがある場合
                // 種牡馬のキューを取得する
                const tmpOverWriteQue = [
                  ...overWriteQue,
                  this.getCellIdQue(tmpInbreed.ownIndex, stallionsArray),
                ];
                overWriteQue = tmpOverWriteQue.flat(1);

                // 繫殖牝馬のキューを取得する
                const tmpOverWriteQueMare = [
                  ...overWriteQueMare,
                  this.getCellIdQue(horse.ownIndex, broodmaresArray),
                ];
                overWriteQueMare = tmpOverWriteQueMare.flat(1);

                // 相手側（種牡馬側）のインブリード配列にセットする（ただし牝馬なので赤くしない）
                checkResultInbreed[tmpInbreed.ownIndex] = {
                  ...tmpInbreed,
                  toRed: false,
                };

                // 他のところで同じお姉ちゃんを使っている判定をしたいんだけど、いったんコメントアウト
                // 相手側（種牡馬側）でクロスした先祖が他にもいないのか確認してセットする
                // const otherInbreedArray = broodmaresArray.filter(broodmare => (broodmare.name === tmpInbreed.name && broodmare.ownIndex !== tmpInbreed.ownIndex));
                // for (const otherInbreed of otherInbreedArray) {
                //   checkResultInbreed[otherInbreed.ownIndex] = otherInbreed
                // }
              }

              // 判定を行わないための上書きする（種牡馬）
              for (const overWriteIndex of overWriteQue) {
                // horseArray[overWriteIndex].selectedHorse = horse.name;
                stallionsArray[overWriteIndex].selectedHorse = horse.name;
              }
              // 判定を行わないための上書きする（繁殖牝馬）
              for (const overWriteIndex of overWriteQueMare) {
                // horseArray[overWriteIndex].selectedHorse = horse.name;
                broodmaresArray[overWriteIndex].selectedHorse = horse.name;
              }

              // 自分でクロスしたとこのインブリード配列にセットする
              checkResultInbreed[horse.ownIndex + 16] = horse;
            }
          }

          for (const horse of stallionsArray) {
            overWriteQue = [];
            overWriteQueMare = [];
            // チェック２
            // 種側に兄弟・肌側に姉妹がいる判定　subNameに()が付いているものが繁殖牝馬名
            const tmpInbreedAllSisters = broodmaresArray.filter(
              (partner) =>
                (partner.subName.substring(0, 1) === "(" &&
                  !horse.fullSisters.every((value) => value === "") &&
                  horse.fullSisters.some(
                    (value) =>
                      value ===
                      partner.subName.substring(1, partner.subName.length - 1)
                  ) &&
                  partner.selectedHorse === horse.selectedHorse &&
                  horse.name === horse.selectedHorse) ||
                (partner.subName.substring(0, 1) === "(" &&
                  !horse.fullSisters.every((value) => value === "") &&
                  horse.fullSisters.some(
                    (value) =>
                      value ===
                      partner.subName.substring(1, partner.subName.length - 1)
                  ) &&
                  partner.selectedHorse !== horse.selectedHorse)
            );

            if (tmpInbreedAllSisters.length > 0) {
              for (const tmpInbreed of tmpInbreedAllSisters) {
                // 肌側に姉妹がいた場合
                // インブリードがある場合は先頭1件のみ取得する
                // ↑のロジックだと全姉妹の祖先も抽出されてしまうため、先頭のみ取りたい
                // 種牡馬のキューを取得する
                const tmpOverWriteQue = [
                  ...overWriteQue,
                  this.getCellIdQue(horse.ownIndex, stallionsArray),
                ];
                overWriteQue = tmpOverWriteQue.flat(1);

                // 繫殖牝馬のキューを取得する
                const tmpOverWriteQueMare = [
                  ...overWriteQueMare,
                  this.getCellIdQue(
                    tmpInbreedAllSisters[0].ownIndex,
                    broodmaresArray
                  ),
                ];
                overWriteQueMare = tmpOverWriteQueMare.flat(1);

                // 相手側のインブリード配列にセットする（ただし赤くしない）
                checkResultInbreed[tmpInbreed.ownIndex + 16] = {
                  ...tmpInbreed,
                  toRed: false,
                };
              }

              // 判定を行わないための上書きする（種牡馬）
              for (const overWriteIndex of overWriteQue) {
                // horseArray[overWriteIndex].selectedHorse = horse.name;
                stallionsArray[overWriteIndex].selectedHorse = horse.name;
              }
              // 判定を行わないための上書きする（繁殖牝馬）
              for (const overWriteIndex of overWriteQueMare) {
                // horseArray[overWriteIndex].selectedHorse = horse.name;
                broodmaresArray[overWriteIndex].selectedHorse = horse.name;
              }

              // // 自分側でクロスした先祖が他にもいないのか確認する
              const otherInbreedArray = stallionsArray.filter(
                (stallion) =>
                  stallion.name === horse.name &&
                  stallion.ownIndex !== horse.ownIndex
              );
              for (const otherInbreed of otherInbreedArray) {
                // 自分側でほかのとこのインブリード配列にセットする
                checkResultInbreed[otherInbreed.ownIndex] = otherInbreed;
              }
              // 自分でクロスしたとこのインブリード配列にセットする
              checkResultInbreed[horse.ownIndex] = horse;
            }

            overWriteQue = [];
            overWriteQueMare = [];

            // チェック３
            // 相手の中に兄弟クロスが入っているのかを判定する
            const tmpAllBrotherInbreedArray = broodmaresArray.filter(
              (partner) =>
                (horse.fullBrothers.some((value) => value === partner.name) &&
                  partner.selectedHorse === horse.selectedHorse &&
                  horse.name === horse.selectedHorse) ||
                (partner.fullBrothers.some((value) => value === horse.name) &&
                  partner.selectedHorse === horse.selectedHorse &&
                  horse.name === horse.selectedHorse) ||
                (horse.fullBrothers.some((value) => value === partner.name) &&
                  partner.selectedHorse !== horse.selectedHorse) ||
                (partner.fullBrothers.some((value) => value === horse.name) &&
                  partner.selectedHorse !== horse.selectedHorse)
            );

            if (tmpAllBrotherInbreedArray.length > 0) {
              for (const tmpInbreed of tmpAllBrotherInbreedArray) {
                // インブリードがある場合
                // 種牡馬のキューを取得する
                const tmpOverWriteQue = [
                  ...overWriteQue,
                  this.getCellIdQue(horse.ownIndex, stallionsArray),
                ];
                overWriteQue = tmpOverWriteQue.flat(1);

                // 繫殖牝馬のキューを取得する
                const tmpOverWriteQueMare = [
                  ...overWriteQueMare,
                  this.getCellIdQue(tmpInbreed.ownIndex, broodmaresArray),
                ];
                overWriteQueMare = tmpOverWriteQueMare.flat(1);

                // 相手側のインブリード配列にセットする
                checkResultInbreed[tmpInbreed.ownIndex + 16] = tmpInbreed;

                // 相手側でクロスした先祖が他にもいないのか確認してセットする
                const otherInbreedArray = broodmaresArray.filter(
                  (broodmare) =>
                    broodmare.name === tmpInbreed.name &&
                    broodmare.ownIndex !== tmpInbreed.ownIndex
                );
                for (const otherInbreed of otherInbreedArray) {
                  checkResultInbreed[otherInbreed.ownIndex + 16] = otherInbreed;
                }
              }

              // 判定を行わないための上書きする（種牡馬）
              for (const overWriteIndex of overWriteQue) {
                stallionsArray[overWriteIndex].selectedHorse = horse.name;
                // stallionsArray[overWriteIndex] = {...stallionsArray[overWriteIndex],selectedHorse1:tmpAllBrotherInbreedArray[0].name}
              }
              // 判定を行わないための上書きする（繁殖牝馬）
              for (const overWriteIndex of overWriteQueMare) {
                broodmaresArray[overWriteIndex].selectedHorse = horse.name;
                // stallionsArray[overWriteIndex] = {...stallionsArray[overWriteIndex],selectedHorse1:tmpAllBrotherInbreedArray[0].name}
              }

              overWriteQue = [];
              // 自分側でクロスした先祖が他にもいないのか確認する
              // const otherInbreedArray = stallionsArray.filter(stallion => (stallion.name === horse.name && stallion.ownIndex !== horse.ownIndex));
              const otherInbreedArray = stallionsArray.filter((stallion) =>
                stallion.fullBrothers.some(
                  (value) =>
                    value === horse.name && stallion.ownIndex !== horse.ownIndex
                )
              );
              for (const otherInbreed of otherInbreedArray) {
                // 自分側でほかのとこのインブリード配列にセットする
                if (!checkResultInbreed[otherInbreed.ownIndex]) {
                  checkResultInbreed[otherInbreed.ownIndex] = otherInbreed;
                }
                // インブリードがある場合
                // 種牡馬のキューを取得する
                const tmpOverWriteQue = [
                  ...overWriteQue,
                  this.getCellIdQue(otherInbreed.ownIndex, stallionsArray),
                ];
                overWriteQue = tmpOverWriteQue.flat(1);

                // 判定を行わないための上書きする（種牡馬）
                for (const overWriteIndex of overWriteQue) {
                  stallionsArray[overWriteIndex].selectedHorse = horse.name;
                }
              }
              // 自分でクロスしたとこのインブリード配列にセットする
              checkResultInbreed[horse.ownIndex] = horse;
            }

            overWriteQue = [];
            overWriteQueMare = [];
            // チェック４
            // 相手の中に同じ名前がいることをチェックする
            // 種側で選択されたのと、肌側で選択されたのが同じ場合かつクロス名が同じ　or 種側で選択されたのと、肌側で選択されたのが異なる場合かつクロス名も違う
            const tmpInbreedArray = broodmaresArray.filter(
              (partner) =>
                (partner.name === horse.name &&
                  partner.selectedHorse === horse.selectedHorse &&
                  horse.name === horse.selectedHorse) ||
                (partner.name === horse.name &&
                  partner.selectedHorse !== horse.selectedHorse)
            );

            if (tmpInbreedArray.length > 0) {
              for (const tmpInbreed of tmpInbreedArray) {
                // インブリードがある場合
                // 種牡馬のキューを取得する
                const tmpOverWriteQue = [
                  ...overWriteQue,
                  this.getCellIdQue(horse.ownIndex, stallionsArray),
                ];
                overWriteQue = tmpOverWriteQue.flat(1);

                // 繫殖牝馬のキューを取得する
                const tmpOverWriteQueMare = [
                  ...overWriteQueMare,
                  this.getCellIdQue(tmpInbreed.ownIndex, broodmaresArray),
                ];
                overWriteQueMare = tmpOverWriteQueMare.flat(1);

                // 相手側のインブリード配列にセットする
                checkResultInbreed[tmpInbreed.ownIndex + 16] = tmpInbreed;

                // 相手側でクロスした先祖が他にもいないのか確認してセットする
                const otherInbreedArray = broodmaresArray.filter(
                  (broodmare) =>
                    broodmare.name === tmpInbreed.name &&
                    broodmare.ownIndex !== tmpInbreed.ownIndex
                );
                for (const otherInbreed of otherInbreedArray) {
                  checkResultInbreed[otherInbreed.ownIndex + 16] = otherInbreed;
                }
              }

              // 判定を行わないための上書きする（種牡馬）
              for (const overWriteIndex of overWriteQue) {
                stallionsArray[overWriteIndex].selectedHorse = horse.name;
              }
              // 判定を行わないための上書きする（繁殖牝馬）
              for (const overWriteIndex of overWriteQueMare) {
                broodmaresArray[overWriteIndex].selectedHorse = horse.name;
              }

              // 自分側でクロスした先祖が他にもいないのか確認する
              const otherInbreedArray = stallionsArray.filter(
                (stallion) =>
                  stallion.name === horse.name &&
                  stallion.ownIndex !== horse.ownIndex
              );
              for (const otherInbreed of otherInbreedArray) {
                // 自分側でほかのとこのインブリード配列にセットする
                checkResultInbreed[otherInbreed.ownIndex] = otherInbreed;
              }
              // 自分でクロスしたとこのインブリード配列にセットする
              checkResultInbreed[horse.ownIndex] = horse;
            }

            i++;
          }
          // インブリード判定結果を格納する
          this.inbreedList = checkResultInbreed;
          // 表示する色を初期化
          this.dispColor = Array.from(new Array(32).fill(""));

          // 数字と(で始まる
          // const excludeString = /^$|^\d*$|^\(.+?\)/
          let inbreedArray = 0;
          checkResultInbreed.map((value, loopIndex) => {
            if (value) {
              if (value?.toRed != false) {
                // 該当する箇所を赤くする
                this.dispColor[loopIndex] = "inbreed";
              }
              // インブリード発生数をカウントアップ
              inbreedArray++;
            }
          });

          // インブリード発生数を返す
          return inbreedArray;
        },
        // 配合理論を求めて画面に表示させる
        dispTheory: function () {
          // 使用例
          const S = [
            [
              this.parentLines[1],
              this.parentLines[3],
              this.parentLines[5],
              this.parentLines[7],
            ],
            [
              this.parentLines[9],
              this.parentLines[11],
              this.parentLines[13],
              this.parentLines[15],
            ],
          ];
          const D = [
            [
              this.parentLines[1 + 16],
              this.parentLines[3 + 16],
              this.parentLines[5 + 16],
              this.parentLines[7 + 16],
            ],
            [
              this.parentLines[1 + 16],
              this.parentLines[3 + 16],
              this.parentLines[5 + 16],
              this.parentLines[7 + 16],
            ],
          ];
          const flattenedS = S.flat();
          const flattenedD = D.flat();

          // 血統表全部が埋まっている場合に理論判定
          if (this.selected.every((e) => e)) {
            this.styleThoeryClass = this.compatibility(S, D);
          } else {
            // 理論系統が埋まっていない場合は、空白を設定
            this.styleThoeryClass = "";
          }
        },

        countCommonElements: function (A, B) {
          // AとBに共通する要素を取得する
          const uniqueCommonElements = [
            ...new Set(A.filter((element) => B.includes(element))),
          ];

          // Aに含まれるuniqueCommonElementsの要素数をカウントする
          const countA = uniqueCommonElements.reduce((count, element) => {
            return count + A.filter((a) => a === element).length;
          }, 0);

          // Bに含まれるuniqueCommonElementsの要素数をカウントする
          const countB = uniqueCommonElements.reduce((count, element) => {
            return count + B.filter((b) => b === element).length;
          }, 0);

          // countAとcountBのうち最小値を取得する
          const minCount = Math.min(countA, countB);

          return minCount;
        },

        countUniqueElements: function (A, B) {
          // AとBを結合して和集合を作成
          const union = [...A, ...B];

          // 和集合から重複を除いた集合Dを取得する
          const uniqueElements = [...new Set(union)];

          // 集合Dの要素数を返す
          return uniqueElements.length;
        },

        // Sire, Damは[[面白系統]，[見事系統]]の書式
        // 面白内，見事内は順不同
        // 例えば，ドゥラメンテなら[["Na","Ne","Ro","Ns"],["Ne","He","Te","Ne"]]
        compatibility: function (Sire, Dam) {
          //面白配合判定
          const omoshiro_count = this.countUniqueElements(Sire[0], Dam[0]);
          const omoshiro_flag = omoshiro_count >= 7;

          //共通要素数の算出
          const common_elms = this.countCommonElements(Sire[1], Dam[0]);

          // 理論なし
          result = "";

          if (omoshiro_flag) {
            // 面白＋よくでき
            if (common_elms == 3) {
              result = "theory_03";
            }
            // 完璧
            if (common_elms == 4) {
              // 牝馬の3代目
              const mother3 = this.selected[3 + 16].name;
              // 牡馬の4代目
              const father4 = [
                this.selected[4].name,
                this.selected[5].name,
                this.selected[6].name,
                this.selected[7].name,
              ];

              let includesNum = father4.filter(function (value) {
                // 牝馬の3代目に合致する種牡馬を配列で取得
                return value === mother3;
              });

              // 4×3のみ奇跡になる。4×4×3は奇跡にならない。
              if (includesNum.length === 1) {
                // 奇跡
                result = "theory_06";
              } else {
                if (omoshiro_count == 8) {
                  // 超完璧
                  result = "theory_05";
                } else {
                  // 普通の完璧
                  result = "theory_04";
                }
              }
            }
            // 面白
            if (common_elms < 3) {
              result = "theory_01";
            }
          } else {
            // よくでき
            if (common_elms == 3) {
              result = "theory_03";
            }
            // 見事
            if (common_elms == 4) {
              result = "theory_02";
            }
          }

          return result;
        },

        // カウントした因子数を画面に表示させる
        dispFactorCounts: function (factorCdArray) {
          // 配列の中にある因子数をカウントする
          let count = {};
          for (var i = 0; i < factorCdArray.length; i++) {
            for (var j = 0; j < factorCdArray[i].length; j++) {
              var elm = factorCdArray[i][j];
              count[elm] = (count[elm] || 0) + 1;
            }
          }

          let factorNumtoString = Array.from(new Array(10).fill("00"));
          //ソートされたものを
          for (var i = 0; i < factorNumtoString.length; i++) {
            var ret = ("00" + (i + 1)).slice(-2);
            if (count[ret]) {
              factorNumtoString[i] = ("00" + count[ret]).slice(-2);
            } else {
              factorNumtoString[i] = "00";
            }
          }
          return factorNumtoString;
        },

        // カウントした子系統数を画面に表示させる
        dispCategoryCount: function () {
          const allSet = this.selected.every((e) => e) ? 0 : -1;
          return (new Set(this.category).size + allSet).toString();
        },
        //血統表に埋めるために配列を入れ替える
        setDataForPedigree: function (sex, id, horseData) {
          const retDataForPedigree = Array.from(new Array(16).fill(null));

          if (horseData) {
            const myId = crypto.randomUUID();
            // リストで選択した性別（種牡馬 or 繁殖牝馬）をセット
            this.selectedSex = horseData.sex;
            // 空以外を選択した場合
            if (horseData.sex === "0" || (horseData.sex === "1" && id === 0)) {
              //牡馬を選択した場合 か 牝馬でも赤いところで牝馬を選択した場合
              // 0番目はデータそのものをセットする
              retDataForPedigree[0] = {
                ...horseData,
                selectedHorse: horseData.name,
                uuid: myId,
              };
              // 0番目以降は祖全データ＋subName''＋使用不可フラグを設定（因子配列も念のためコピー）
              retDataForPedigree[1] = {
                ...horseData.descendants[0],
                subName: "",
                factors: [...horseData.descendants[0].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[2] = {
                ...horseData.descendants[1],
                subName: "",
                factors: [...horseData.descendants[1].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[3] = {
                ...horseData.descendants[8],
                subName: "",
                factors: [...horseData.descendants[8].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[4] = {
                ...horseData.descendants[2],
                subName: "",
                factors: [...horseData.descendants[2].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[5] = {
                ...horseData.descendants[5],
                subName: "",
                factors: [...horseData.descendants[5].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[6] = {
                ...horseData.descendants[9],
                subName: "",
                factors: [...horseData.descendants[9].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[7] = {
                ...horseData.descendants[12],
                subName: "",
                factors: [...horseData.descendants[12].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[12].name,
                uuid: myId,
              };
              retDataForPedigree[8] = {
                ...horseData.descendants[3],
                subName: "",
                factors: [...horseData.descendants[3].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[9] = {
                ...horseData.descendants[4],
                subName: "",
                factors: [...horseData.descendants[4].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[10] = {
                ...horseData.descendants[6],
                subName: "",
                factors: [...horseData.descendants[6].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[11] = {
                ...horseData.descendants[7],
                subName: "",
                factors: [...horseData.descendants[7].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[12] = {
                ...horseData.descendants[10],
                subName: "",
                factors: [...horseData.descendants[10].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[13] = {
                ...horseData.descendants[11],
                subName: "",
                factors: [...horseData.descendants[11].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[14] = {
                ...horseData.descendants[13],
                subName: "",
                factors: [...horseData.descendants[13].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[12].name,
                uuid: myId,
              };
              retDataForPedigree[15] = {
                ...horseData.descendants[14],
                subName: "",
                factors: [...horseData.descendants[14].factors],
                disabled: true,
                selectedHorse:
                  horseData.sex === "0"
                    ? horseData.name
                    : horseData.descendants[14].name,
                uuid: myId,
              };
            } else {
              //牝馬を選択した場合
              retDataForPedigree[0] = {
                ...horseData.descendants[0],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[0].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[1] = {
                ...horseData.descendants[1],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[1].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[2] = {
                ...horseData.descendants[8],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[8].factors],
                disabled: true,
                selectedHorse: horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[3] = {
                ...horseData.descendants[2],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[2].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[4] = {
                ...horseData.descendants[5],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[5].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[5] = {
                ...horseData.descendants[9],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[9].factors],
                disabled: true,
                selectedHorse: horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[6] = {
                ...horseData.descendants[12],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[12].factors],
                disabled: true,
                selectedHorse: horseData.descendants[12].name,
                uuid: myId,
              };
              retDataForPedigree[7] = {
                ...horseData.descendants[3],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[3].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[8] = {
                ...horseData.descendants[4],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[4].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[9] = {
                ...horseData.descendants[6],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[6].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[10] = {
                ...horseData.descendants[7],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[7].factors],
                disabled: true,
                selectedHorse: horseData.descendants[0].name,
                uuid: myId,
              };
              retDataForPedigree[11] = {
                ...horseData.descendants[10],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[10].factors],
                disabled: true,
                selectedHorse: horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[12] = {
                ...horseData.descendants[11],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[11].factors],
                disabled: true,
                selectedHorse: horseData.descendants[8].name,
                uuid: myId,
              };
              retDataForPedigree[13] = {
                ...horseData.descendants[13],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[13].factors],
                disabled: true,
                selectedHorse: horseData.descendants[12].name,
                uuid: myId,
              };
              retDataForPedigree[14] = {
                ...horseData.descendants[14],
                subName: `(${horseData.name})`,
                factors: [...horseData.descendants[14].factors],
                disabled: true,
                selectedHorse: horseData.descendants[14].name,
                uuid: myId,
              };
              retDataForPedigree[15] = "broodmares";
            }
          }
          return retDataForPedigree;
        },

        //偶数であることを確認する
        //0は例外でFalseを返す
        //1は例外でTrueを返す
        isEven: function (cellNumber) {
          switch (cellNumber) {
            case 0:
              return false;
            case 1:
              return true;
            default:
              return cellNumber % 2 === 0;
          }
        },

        // 半角→全角(英数字)
        replaceHalfToFull: function (str) {
          return str.replace(/[!-~]/g, function (s) {
            return String.fromCharCode(s.charCodeAt(0) + 0xfee0);
          });
        },

        // 親系統配列に詰めるかの判定をする
        judgeSetParentLine: function (str, cell_id) {
          let ParentLine = "";
          switch (cell_id) {
            // （+ 16）は牝馬のほう（面白系統）
            case 1:
            case 3:
            case 5:
            case 7:
            case 1 + 16:
            case 3 + 16:
            case 5 + 16:
            case 7 + 16:
              ParentLine = str ?? "";
              break;
            // 見事系統
            case 9:
            case 11:
            case 13:
            case 15:
              ParentLine = str ?? "";
              break;
            default:
              break;
          }
          return ParentLine;
        },

        // セルに因子CSSを詰める
        fillInFactorCells: function (str, cell_id) {
          if (str == "00") {
            // nullのときはデフォルトのCSSを返す
            return `${this.getCss(cell_id)} styleFactorClassMain`;
          } else {
            return `f${str} styleFactorClassMain`;
          }
        },

        // セルに因子CSSを詰める
        fillInParentLineCells: function (str, cell_id) {
          if (str == null || str === "") {
            // nullのときはデフォルトのCSSを返す
            return `${this.getCss(cell_id)} styleParentLine`;
          } else {
            return `${str} styleParentLine`;
          }
        },

        getCellIdQue: function (cellNo, horseDataList) {
          // 設定するセルの最大値を決める
          var max_cell_id = cellNo;
          while (true) {
            if (max_cell_id * 2 >= 16) {
              max_cell_id = max_cell_id + 1;
              break;
            }

            max_cell_id = max_cell_id * 2 + 1;
            if (max_cell_id * 2 > 16) {
              break;
            }

            // if (Object.keys(horseDataList[15]).length === 0) {
            if (
              horseDataList[15] === "broodmares" ||
              horseDataList[cellNo]?.subName.substring(0, 1) === "("
            ) {
              // 選択したのが繫殖牝馬だった or インブリードしたのが牝馬（赤色のところはのぞく場合）はこっちのルートに入る broodmares
              // 繫殖牝馬だった（赤色のところはのぞく場合）は16番目にNULLを設定しているので
              max_cell_id = (max_cell_id + 1) * 2;
            } else {
              max_cell_id = max_cell_id * 2;
            }
            if (max_cell_id * 2 > 16) {
              break;
            }

            while (true) {
              max_cell_id = max_cell_id * 2;
              if (max_cell_id * 2 > 16) {
                break;
              }
            }
            break;
          }

          //格納するドロップダウンリストの配列作成（初期値は選択したセル）
          var cell_id_que = [cellNo];
          var is_checked = [false];

          var i = 1;
          while (is_checked.indexOf(false) + 1) {
            // falseが最初に来るindexを取得
            var index = is_checked.indexOf(false);
            is_checked[index] = true;

            if (2 * cell_id_que[index] < max_cell_id) {
              if (
                i === 1 &&
                horseDataList[15] != "broodmares" &&
                horseDataList[cellNo]?.subName.substring(0, 1) != "("
              ) {
                // 初回でかつ 繫殖牝馬だった（赤色のところはのぞく場合）はこちらのルートに
                if (cellNo === 0) {
                  // 0のときだけ例外
                  cell_id_que.push(1);
                } else {
                  cell_id_que.push(2 * cell_id_que[index]);
                }
                is_checked.push(false);
              } else {
                cell_id_que.push(2 * cell_id_que[index]);
                cell_id_que.push(2 * cell_id_que[index] + 1);
                is_checked.push(false);
                is_checked.push(false);
              }
              i++;
            }
          }

          return cell_id_que;
        },

        // 因子名を詰め込む
        setFactorName: function (row, col, factorName) {
          this.factorName[row][col] = factorName;
        },

        // 因子情報を詰め込む
        setFactorCd: function (row, col, factorCd) {
          this.factorCd[row][col] = factorCd;
        },

        // 因子情報を詰め込む
        setFactorCss: function (row, col, styleFactorClass) {
          this.styleFactorClasses[row][col] = styleFactorClass;
        },

        // 親系統を詰め込む
        setParentLine: function (row, parentLine) {
          this.parentLines[row] = parentLine;
          this.styleParentLineClasses[row] = this.fillInParentLineCells(
            parentLine,
            row
          );
        },

        // 選択したセルを起点に血統データを入れる関数
        setPedigree: function (sex, cellNo, horseDataList) {
          // 詰めるためのキューを取得する
          const cell_id_que = this.getCellIdQue(cellNo, horseDataList);

          // 先祖に向かって血統表をセットする
          for (const cell_id of cell_id_que) {
            // 名前をセットする
            if (
              !(sex === 1 && cell_id === 0) &&
              horseDataList[cell_id_que.indexOf(cell_id)]
            ) {
              // 繁殖牝馬直のリスト選択したときはここに入ってこない
              if (
                this.horses.findIndex(
                  (object) =>
                    object?.name ===
                      horseDataList[cell_id_que.indexOf(cell_id)].name &&
                    object?.subName ===
                      horseDataList[cell_id_que.indexOf(cell_id)].subName
                ) === -1
              ) {
                // リストに無い場合は追加する
                this.stallions = [
                  ...Array.from(this.stallions),
                  { ...horseDataList[cell_id_que.indexOf(cell_id)] },
                ];
                this.horses = [
                  ...Array.from(this.horses),
                  { ...horseDataList[cell_id_que.indexOf(cell_id)] },
                ];
              }
            }

            // セットする＋自分の位置も併せてセットする
            if (horseDataList[cell_id_que.indexOf(cell_id)]) {
              this.selected[cell_id + sex * 16] = {
                ...horseDataList[cell_id_que.indexOf(cell_id)],
                index: cell_id + sex * 16,
              };
              this.category[cell_id + sex * 16] =
                horseDataList[cell_id_que.indexOf(cell_id)].son;
            } else {
              this.selected[cell_id + sex * 16] = null;
              this.category[cell_id + sex * 16] = null;
            }

            // 配列に因子名を詰め込む
            // horseDataList[i]がnullの場合、horseDataList[cell_id_que.indexOf(cell_id)]?.factors[0]がundefinedとなるので、''を返却する
            this.setFactorName(
              cell_id + sex * 16,
              0,
              horseDataList[cell_id_que.indexOf(cell_id)]?.factors[0] ?? ""
            );
            this.setFactorName(
              cell_id + sex * 16,
              1,
              horseDataList[cell_id_que.indexOf(cell_id)]?.factors[1] ?? ""
            );
            this.setFactorName(
              cell_id + sex * 16,
              2,
              horseDataList[cell_id_que.indexOf(cell_id)]?.factors[2] ?? ""
            );

            // 配列に因子情報を詰め込む
            // horseDataList[i]がnullの場合、horseDataList[cell_id_que.indexOf(cell_id)]?.factors[0]がundefinedとなるので、'00'を返却する
            this.setFactorCd(
              cell_id + sex * 16,
              0,
              factorMap.get(
                horseDataList[cell_id_que.indexOf(cell_id)]?.factors[0]
              ) ?? "00"
            );
            this.setFactorCd(
              cell_id + sex * 16,
              1,
              factorMap.get(
                horseDataList[cell_id_que.indexOf(cell_id)]?.factors[1]
              ) ?? "00"
            );
            this.setFactorCd(
              cell_id + sex * 16,
              2,
              factorMap.get(
                horseDataList[cell_id_que.indexOf(cell_id)]?.factors[2]
              ) ?? "00"
            );

            // 因子css
            this.setFactorCss(
              cell_id + sex * 16,
              0,
              this.fillInFactorCells(
                this.factorCd[cell_id + sex * 16][0],
                cell_id + sex * 16
              )
            );
            this.setFactorCss(
              cell_id + sex * 16,
              1,
              this.fillInFactorCells(
                this.factorCd[cell_id + sex * 16][1],
                cell_id + sex * 16
              )
            );
            this.setFactorCss(
              cell_id + sex * 16,
              2,
              this.fillInFactorCells(
                this.factorCd[cell_id + sex * 16][2],
                cell_id + sex * 16
              )
            );

            // 親系統
            this.setParentLine(
              cell_id + sex * 16,
              this.judgeSetParentLine(
                horseDataList[cell_id_que.indexOf(cell_id)]?.parentLine,
                cell_id + sex * 16
              )
            );
          }

          // 子孫に選択した種牡馬のＮ薄めを血統データに入れる
          let reverseNum = cellNo;
          let reverseCnt = 0;
          const name = horseDataList[0]?.name;
          const subName = horseDataList[0]?.subName;
          const parentLine = horseDataList[0]?.parentLine;
          const uuid = horseDataList[0]?.uuid;
          const son = horseDataList[0]?.son;
          while (this.isEven(reverseNum)) {
            // 2で割る
            reverseNum = Math.floor(reverseNum / 2);

            if (name) {
              // 追加モード
              reverseCnt++;
              // 自家製種牡馬名
              const handMadeName = `★${this.replaceHalfToFull(
                reverseCnt.toString(10)
              )}薄め${name.trim()}${subName.trim()}`;
              if (reverseNum === 0 && sex === 1) {
                // 自家製牝馬をセット
                this.broodmares = [
                  ...Array.from(this.broodmares),
                  {
                    name: "ワタシノヒンバ",
                    subName: "",
                    disabled: true,
                    factors: Array.from(new Array(3).fill("")),
                    fullBrothers: Array.from(new Array(2).fill("")),
                    fullSisters: Array.from(new Array(2).fill("")),
                    uuid: uuid,
                  },
                ];
                this.selected[reverseNum + sex * 16] = {
                  name: "ワタシノヒンバ",
                  subName: "",
                  disabled: true,
                  index: reverseNum + sex * 16,
                  factors: Array.from(new Array(3).fill("")),
                  fullBrothers: Array.from(new Array(2).fill("")),
                  fullSisters: Array.from(new Array(2).fill("")),
                  uuid: uuid,
                };
                // 子系統をセット
                this.category[reverseNum + sex * 16] = son;
              } else {
                // 名前をセット
                this.horses = [
                  ...Array.from(this.horses),
                  {
                    name: handMadeName,
                    subName: "",
                    parentLine: parentLine,
                    factors: Array.from(new Array(3).fill("")),
                    fullBrothers: Array.from(new Array(2).fill("")),
                    fullSisters: Array.from(new Array(2).fill("")),
                    disabled: true,
                    uuid: uuid,
                  },
                ];
                this.stallions = [
                  ...Array.from(this.horses),
                  {
                    name: handMadeName,
                    subName: "",
                    parentLine: parentLine,
                    factors: Array.from(new Array(3).fill("")),
                    fullBrothers: Array.from(new Array(2).fill("")),
                    fullSisters: Array.from(new Array(2).fill("")),
                    disabled: true,
                    uuid: uuid,
                  },
                ];
                this.selected[reverseNum + sex * 16] = {
                  name: handMadeName,
                  subName: "",
                  parentLine: parentLine,
                  factors: Array.from(new Array(3).fill("")),
                  fullBrothers: Array.from(new Array(2).fill("")),
                  fullSisters: Array.from(new Array(2).fill("")),
                  disabled: true,
                  index: reverseNum + sex * 16,
                  uuid: uuid,
                };
                // 親系統を設定する
                this.setParentLine(
                  reverseNum + sex * 16,
                  this.judgeSetParentLine(parentLine, reverseNum + sex * 16)
                );
                // 子系統をセット
                this.category[reverseNum + sex * 16] = son;
              }
            }
            // 配列に因子名を詰め込む
            this.setFactorName(reverseNum + sex * 16, 0, "");
            this.setFactorName(reverseNum + sex * 16, 1, "");
            this.setFactorName(reverseNum + sex * 16, 2, "");
            // 配列に因子情報を詰め込む
            this.setFactorCd(reverseNum + sex * 16, 0, "00");
            this.setFactorCd(reverseNum + sex * 16, 1, "00");
            this.setFactorCd(reverseNum + sex * 16, 2, "00");
            // 因子css
            this.setFactorCss(
              reverseNum + sex * 16,
              0,
              this.fillInFactorCells(
                this.factorCd[reverseNum + sex * 16][0],
                reverseNum + sex * 16
              )
            );
            this.setFactorCss(
              reverseNum + sex * 16,
              1,
              this.fillInFactorCells(
                this.factorCd[reverseNum + sex * 16][1],
                reverseNum + sex * 16
              )
            );
            this.setFactorCss(
              reverseNum + sex * 16,
              2,
              this.fillInFactorCells(
                this.factorCd[reverseNum + sex * 16][2],
                reverseNum + sex * 16
              )
            );
          }

          // 最後に配列に馬リストの配列にセットする
          this.horseDataLists = [this.horses, this.stallions, this.broodmares];
        },
      },
    });
  </script>
</html>
